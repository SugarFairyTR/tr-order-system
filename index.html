<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ìã∞ÏïåÏΩîÎ¶¨ÏïÑ Ï£ºÎ¨∏ÏãúÏä§ÌÖú V1.0</title>
    
    <!-- PWA Î©îÌÉÄ ÌÉúÍ∑∏ -->
    <meta name="theme-color" content="#2196F3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Ìã∞ÏïåÏΩîÎ¶¨ÏïÑ Ï£ºÎ¨∏ÏãúÏä§ÌÖú V1.0">
    
    <!-- PWA Îß§ÎãàÌéòÏä§Ìä∏ -->
    <link rel="manifest" href="manifest.json">
    
    <!-- ÏïÑÏù¥ÏΩò -->
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Î°úÍ∑∏Ïù∏ ÌôîÎ©¥ -->
        <div id="loginScreen" class="login-screen active">
            <div class="login-container">
                <div class="login-header">
                    <div class="company-logo">
                        <i class="fas fa-building"></i>
                        <h1>Ìã∞ÏïåÏΩîÎ¶¨ÏïÑ</h1>
                        <p>Ï£ºÎ¨∏ÏãúÏä§ÌÖú</p>
                    </div>
                </div>
                
                <div class="login-form">
                    <div class="form-group">
                        <label for="loginManager">Îã¥ÎãπÏûê ÏÑ†ÌÉù</label>
                        <select id="loginManager" required>
                            <option value="">Îã¥ÎãπÏûêÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="loginPin">PIN Î≤àÌò∏ (4ÏûêÎ¶¨)</label>
                        <input type="password" id="loginPin" maxlength="4" placeholder="PIN Î≤àÌò∏ ÏûÖÎ†•" required>
                    </div>
                    
                    <button type="button" id="loginBtn" class="btn btn-primary login-btn">
                        <i class="fas fa-sign-in-alt"></i> Î°úÍ∑∏Ïù∏
                    </button>
                    
                    <div class="login-footer">
                        <p>¬© 2025 Ï£ºÏãùÌöåÏÇ¨ Ìã∞ÏïåÏΩîÎ¶¨ÏïÑ</p>
                        <p class="version">v1.0.0</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Î©îÏù∏ Ïï± ÌôîÎ©¥ (Î°úÍ∑∏Ïù∏ ÌõÑ ÌëúÏãú) -->
        <div id="mainApp" class="main-app hidden">
            <!-- Ìó§Îçî -->
            <header class="app-header">
                <div class="header-left">
                    <h1><i class="fas fa-shopping-cart"></i> Ìã∞ÏïåÏΩîÎ¶¨ÏïÑ Ï£ºÎ¨∏ÏãúÏä§ÌÖú V1.0</h1>
                    <span id="currentUser" class="current-user"></span>
                </div>
                <div class="header-right">
                    <button id="settingsBtn" class="settings-btn">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button id="logoutBtn" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </header>

            <!-- Î©îÏù∏ Ïª®ÌÖêÏ∏† -->
            <main class="main-content">
                <!-- Ï£ºÎ¨∏ ÏûÖÎ†• ÌôîÎ©¥ -->
                <div id="orderForm" class="screen active">
                    <div class="form-section">
                        <h2><i class="fas fa-plus-circle"></i> Ïã†Í∑ú Ï£ºÎ¨∏ ÏûÖÎ†•</h2>
                        
                        <!-- Îã¥ÎãπÏûê ÏÑ†ÌÉù -->
                        <div class="form-group">
                            <label for="manager">Îã¥ÎãπÏûê</label>
                            <select id="manager" required>
                                <option value="">Îã¥ÎãπÏûê ÏÑ†ÌÉù</option>
                            </select>
                        </div>

                        <!-- ÌåêÎß§Ï≤ò ÏÑ†ÌÉù -->
                        <div class="form-group">
                            <label for="seller">ÌåêÎß§Ï≤ò</label>
                            <select id="seller" required>
                                <option value="">ÌåêÎß§Ï≤ò ÏÑ†ÌÉù</option>
                            </select>
                        </div>

                        <!-- ÎèÑÏ∞©ÏßÄ ÏÑ†ÌÉù -->
                        <div class="form-group">
                            <label for="destination">ÎèÑÏ∞©ÏßÄ</label>
                            <select id="destination" required>
                                <option value="">ÎèÑÏ∞©ÏßÄ ÏÑ†ÌÉù</option>
                            </select>
                        </div>

                        <!-- Î∂ÑÎ•ò ÏÑ†ÌÉù -->
                        <div class="form-group">
                            <label for="category">Î∂ÑÎ•ò</label>
                            <select id="category" required>
                                <option value="">Î∂ÑÎ•ò ÏÑ†ÌÉù</option>
                            </select>
                        </div>

                        <!-- ÌíàÎ™© ÏÑ†ÌÉù -->
                        <div class="form-group">
                            <label for="product">ÌíàÎ™©</label>
                            <select id="product" required>
                                <option value="">ÌíàÎ™© ÏÑ†ÌÉù</option>
                            </select>
                        </div>

                        <!-- ÏàòÎüâ ÏûÖÎ†• -->
                        <div class="form-group">
                            <label for="quantity">ÏàòÎüâ (KG)</label>
                            <input type="text" 
                                   id="quantity" 
                                   class="number-format-input" 
                                   data-format="number" 
                                   inputmode="numeric" 
                                   pattern="[0-9,]*" 
                                   autocomplete="off" 
                                   spellcheck="false"
                                   required 
                                   placeholder="ÏàòÎüâ ÏûÖÎ†•">
                        </div>

                        <!-- Îã®Í∞Ä ÏûÖÎ†• -->
                        <div class="form-group">
                            <label for="price">Îã®Í∞Ä (Í≥µÍ∏âÍ∞ÄÏï°)</label>
                            <input type="text" 
                                   id="price" 
                                   class="number-format-input" 
                                   data-format="number" 
                                   inputmode="numeric" 
                                   pattern="[0-9,]*" 
                                   autocomplete="off" 
                                   spellcheck="false"
                                   required 
                                   placeholder="Îã®Í∞Ä ÏûÖÎ†•">
                        </div>

                        <!-- ÎèÑÏ∞©Ïùº ÏÑ†ÌÉù -->
                        <div class="form-group">
                            <label for="deliveryDate">ÎèÑÏ∞©Ïùº</label>
                            <input type="date" id="deliveryDate" required>
                        </div>

                        <div class="form-group">
                            <label for="deliveryTime">ÎèÑÏ∞©ÏãúÍ∞Ñ</label>
                            <select id="deliveryTime" required>
                                <option value="">ÏãúÍ∞Ñ ÏÑ†ÌÉù</option>
                                <option value="07:00">07:00 AM</option>
                                <option value="08:00">08:00 AM</option>
                                <option value="09:00">09:00 AM</option>
                                <option value="10:00">10:00 AM</option>
                                <option value="11:00">11:00 AM</option>
                                <option value="12:00">12:00 PM</option>
                                <option value="13:00">01:00 PM</option>
                                <option value="14:00">02:00 PM</option>
                                <option value="15:00">03:00 PM</option>
                                <option value="16:00">04:00 PM</option>
                                <option value="17:00">05:00 PM</option>
                                <option value="18:00">06:00 PM</option>
                                <option value="19:00">07:00 PM</option>
                                <option value="20:00">08:00 PM</option>
                            </select>
                        </div>

                        <!-- Ï¥ùÏï° ÌëúÏãú -->
                        <div class="form-group total-section">
                            <label>Ï¥ùÏï° (Í≥µÍ∏âÍ∞ÄÏï°)</label>
                            <div class="total-amount" id="totalAmount">0Ïõê</div>
                        </div>

                        <!-- Î≤ÑÌäºÎì§ -->
                        <div class="button-group">
                            <button type="button" id="saveOrderBtn" class="btn btn-primary">
                                <i class="fas fa-save"></i> Ï†ÄÏû•
                            </button>
                            <button type="button" id="resetFormBtn" class="btn btn-secondary">
                                <i class="fas fa-undo"></i> Ï¥àÍ∏∞Ìôî
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Ï£ºÎ¨∏ Î™©Î°ù ÌôîÎ©¥ -->
                <div id="orderList" class="screen">
                    <div class="page-header">
                        <h2>üìã Ï£ºÎ¨∏ Î™©Î°ù</h2>
                        <div class="header-actions">
                            <button type="button" class="btn btn-secondary" onclick="app.showStatistics()">
                                <i class="fas fa-chart-bar"></i> ÌÜµÍ≥Ñ
                            </button>
                        </div>
                    </div>

                    <!-- Í≤ÄÏÉâ Î∞è ÌïÑÌÑ∞ -->
                    <div class="filter-section">
                        <div class="form-group">
                            <label for="searchBox">üîç Í≤ÄÏÉâ</label>
                            <input type="text" id="searchBox" placeholder="Ï£ºÎ¨∏Î≤àÌò∏, Îã¥ÎãπÏûê, ÌåêÎß§Ï≤ò, ÌíàÎ™© Îì± Í≤ÄÏÉâ..." 
                                   style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
                            <div class="form-group">
                                <label for="filterManager">Îã¥ÎãπÏûê ÌïÑÌÑ∞</label>
                                <select id="filterManager">
                                    <option value="">Ï†ÑÏ≤¥</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="filterDate">ÎÇ†Ïßú ÌïÑÌÑ∞</label>
                                <input type="date" id="filterDate">
                            </div>

                            <div class="form-group" style="display: flex; align-items: center; padding-top: 1.5rem;">
                                <label>
                                    <input type="checkbox" id="showPastOrders" style="margin-right: 0.5rem;">
                                    Í≥ºÍ±∞ Ï£ºÎ¨∏ ÌëúÏãú
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Ï£ºÎ¨∏ ÌÜµÍ≥Ñ ÏöîÏïΩ -->
                    <div class="stats-summary" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #2196f3;">
                                <span id="totalOrders">0</span>
                            </div>
                            <div style="font-size: 0.9rem; color: #666;">Ï†ÑÏ≤¥ Ï£ºÎ¨∏</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #4caf50;">
                                <span id="todayOrders">0</span>
                            </div>
                            <div style="font-size: 0.9rem; color: #666;">Ïò§Îäò Ï£ºÎ¨∏</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #ff9800;">
                                <span id="futureOrders">0</span>
                            </div>
                            <div style="font-size: 0.9rem; color: #666;">ÎØ∏Îûò Ï£ºÎ¨∏</div>
                        </div>
                    </div>

                    <!-- Ï£ºÎ¨∏ Î™©Î°ù Ïª®ÌÖåÏù¥ÎÑà -->
                    <div id="orderListContainer">
                        <!-- Ï£ºÎ¨∏ Î™©Î°ùÏù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                    </div>
                </div>

                <!-- Ï£ºÎ¨∏ ÏàòÏ†ï ÌôîÎ©¥ -->
                <div id="orderEdit" class="screen">
                    <div class="form-section">
                        <h2><i class="fas fa-edit"></i> Ï£ºÎ¨∏ ÏàòÏ†ï</h2>
                        <!-- Ï£ºÎ¨∏ ÏûÖÎ†•Í≥º ÎèôÏùºÌïú ÌèºÏù¥ÏßÄÎßå ÏàòÏ†ï Î™®Îìú -->
                        <div id="editFormContainer">
                            <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
                        </div>
                    </div>
                </div>

                <!-- ÏÑ§Ï†ï ÌôîÎ©¥ -->
                <div id="settings" class="screen">
                    <div class="settings-section">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <button type="button" onclick="app.switchScreen('orderForm')" class="btn btn-secondary" style="flex: none; padding: 0.5rem 1rem;">
                                <i class="fas fa-arrow-left"></i> Îí§Î°ú
                            </button>
                            <h2 style="margin: 0; flex: 1; text-align: center;"><i class="fas fa-cog"></i> ÏÑ§Ï†ï</h2>
                            <div style="flex: none; width: 80px;"></div> <!-- Í∑†ÌòïÏùÑ ÏúÑÌïú Í≥µÍ∞Ñ -->
                        </div>
                        
                        <div class="form-group">
                            <label for="defaultManager">Í∏∞Î≥∏ Îã¥ÎãπÏûê</label>
                            <select id="defaultManager">
                                <option value="">ÏÑ†ÌÉù ÏïàÌï®</option>
                            </select>
                        </div>

                        <div class="settings-info">
                            <h3>Ïï± Ï†ïÎ≥¥</h3>
                            <p>Î≤ÑÏ†Ñ: 1.0.0</p>
                            <p>ÎßàÏßÄÎßâ ÏóÖÎç∞Ïù¥Ìä∏: <span id="lastUpdate"></span></p>
                            <p>Ï†ÄÏû•Îêú Ï£ºÎ¨∏: <span id="orderCount">0</span>Í∞ú</p>
                            <p>Î°úÍ∑∏Ïù∏ ÏÇ¨Ïö©Ïûê: <span id="loginUser"></span></p>
                        </div>

                        <div class="button-group">
                            <button type="button" id="saveFileBtn" class="btn btn-primary">
                                <i class="fas fa-file-download"></i> order_list.json Ï†ÄÏû•
                            </button>
                            <button type="button" id="loadFileBtn" class="btn btn-primary">
                                <i class="fas fa-file-upload"></i> order_list.json Î∂àÎü¨Ïò§Í∏∞
                            </button>
                        </div>

                        <div class="button-group" style="margin-top: 1rem;">
                            <button type="button" onclick="app.showFirebaseSetupGuide()" class="btn" 
                                    style="background: linear-gradient(135deg, #ff6f00 0%, #ff8f00 100%); color: white;">
                                <i class="fas fa-fire"></i> Firebase ÌÅ¥ÎùºÏö∞Îìú ÏûêÎèôÏ†ÄÏû• ÏÑ§Ï†ï
                            </button>
                        </div>

                        <div class="button-group" style="margin-top: 1rem;">
                            <button type="button" onclick="app.showCloudSaveAlternatives()" class="btn" 
                                    style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                                <i class="fas fa-cloud"></i> Í∏∞ÌÉÄ ÌÅ¥ÎùºÏö∞Îìú Ï†ÄÏû• Î∞©Î≤ïÎì§
                            </button>
                        </div>

                        <div class="button-group" style="margin-top: 1rem;">
                            <button type="button" id="exportDataBtn" class="btn btn-secondary">
                                <i class="fas fa-download"></i> Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞
                            </button>
                            <button type="button" id="clearDataBtn" class="btn btn-danger">
                                <i class="fas fa-trash"></i> Î™®Îì† Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú
                            </button>
                        </div>
                    </div>
                </div>
            </main>

            <!-- ÌïòÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
            <nav class="bottom-nav">
                <button class="nav-btn active" data-screen="orderForm">
                    <i class="fas fa-plus"></i>
                    <span>Ï£ºÎ¨∏ÏûÖÎ†•</span>
                </button>
                <button class="nav-btn" data-screen="orderList">
                    <i class="fas fa-list"></i>
                    <span>Î™©Î°ùÎ≥¥Í∏∞</span>
                </button>
                <button class="nav-btn" data-screen="orderEdit">
                    <i class="fas fa-edit"></i>
                    <span>Ï£ºÎ¨∏ÏàòÏ†ï</span>
                </button>
            </nav>
        </div>
    </div>

    <!-- Î°úÎî© Ïä§ÌîºÎÑà -->
    <div id="loadingSpinner" class="loading-spinner">
        <div class="spinner"></div>
        <p>Ï≤òÎ¶¨ Ï§ë...</p>
    </div>

    <!-- ÏïåÎ¶º Î©îÏãúÏßÄ -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
        <button id="closeNotification">&times;</button>
    </div>

    <!-- JavaScript -->
    <script src="app.js"></script>
</body>
</html> 